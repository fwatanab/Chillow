# Chillow 要件定義書

## 【概要】
Chillow は WebSocket を用いたリアルタイムチャットアプリケーションです。  
Googleアカウントでログインし、友達との個別チャットが可能。  
ゆったりと会話できる「Chill」な空間を提供します。

---

## 【システム構成】

- フロントエンド：React.js (TypeScript)
- バックエンド：Go
- データベース：MySQL

---

## 【機能要件】

### ▶ 認証
- Google OAuth 2.0 によるログイン・新規登録
- 登録時にニックネームを設定（後から変更可能）

### ▶ 友達機能
- フレンドコードによる検索で友達追加
- 申請方式（相手の承認が必要）
- 友達の削除

### ▶ チャット
- 1対1の個人チャット（WebSocketによるリアルタイム通信）
- メッセージ履歴の保存
- 既読・未読管理
- 自分の送信メッセージの削除（片側 or 両側かは設計で決定）

### ▶ マイページ
- Googleアバターとニックネームの表示
- ニックネームの編集
- ログアウト
- アカウント削除（確認あり）

---

## 【画面構成】

### トップ画面（`/`）
「ホーム」タブ
- プロフィール表示（ニックネーム・アバター）
- 友達一覧（追加順・かな順でソート可能）
- 友達のステータス（オンライン / オフライン、最終メッセージ時刻）
- 右上に「友達追加ボタン（+）」あり

### トーク画面（`/chat`）
「トーク」タブ
- チャット一覧（更新順に並べる）
- 各項目：アイコン・名前・最新メッセージの抜粋・時刻・未読件数
- クリックで個別チャット（`/chat/:id`）に遷移

### 個別チャット画面（`/chat/:id`）
- 上部：相手の名前と「戻るボタン」
- 中央：チャット履歴（吹き出し表示）
- 下部：入力欄と送信ボタン

### マイページ（`/mypage`）
「設定」タブ
- Googleアバターとニックネームの表示
- ニックネーム編集フォーム
- ログアウトボタン
- アカウント削除（注意表示付き）

---

## 【追加仕様】

### ▶ 友達追加方式
- 登録時に一意なフレンドコード（例：`U123ABC`）を生成
- 検索→申請→相手が承認→友達成立
- 中間テーブルで申請状態（`pending`, `accepted`, `rejected`）を管理

### ▶ 通知機能
- WebSocket によるリアルタイム通知
- 新着メッセージで通知音＋チャット一覧に未読バッジ表示
- PWA通知（後日対応可能）

### ▶ メッセージ管理
- 自分の送信メッセージの削除機能あり（片側 or 両側）
- チャット画面を開いた時点で既読に変更
- 未読状態に応じて通知表示を制御

### ▶ バリデーション
- ニックネームは重複可（識別はメール or フレンドコード）
- 入力文字数・禁止語句などは別途定義予定

---

## 【今後の開発項目】

- ER図の作成（users, friends, messages, message_reads など）
- API仕様書（REST + WebSocket）
- テスト計画（ユニット, 結合, E2E）
- UIモックアップ・スタイルガイド（Figma等）
- PWA対応 / ネイティブアプリ展開計画


